# 智能健身助手功能说明

## 概述

智能健身助手是一个基于 AI 的健身器械替代方案推荐系统。当用户在健身房遇到器械被占用时，系统能够根据器械的功能、锻炼肌群等信息，智能推荐合适的替代方案。

## 功能特点

- 🤖 **AI 智能推荐**: 基于 AI 模型，理解用户需求并推荐合适的替代器械
- 💪 **完整知识库**: 内置多种常见健身器械信息
- 🎯 **肌群导向**: 根据目标肌群推荐最佳替代方案
- 📝 **详细说明**: 提供器械描述、注意事项和训练建议
- 🔄 **对话记忆**: 支持多轮对话，保持上下文连贯

## 技术实现

### 后端架构

#### 1. 实体类 (GymEquipment.java)

存储健身器械的完整信息：

- 器械名称
- 器械描述
- 主要锻炼肌群
- 替代器械列表
- 训练类型
- 难度等级
- 注意事项和技巧

#### 2. 数据服务 (GymEquipmentService.java)

- 自动初始化健身器械数据库
- 提供器械查询和搜索功能
- 支持按肌群查找器械

#### 3. AI 服务增强 (AiAgentService.java)

- 新增"fitness"类型的 AI 代理
- 集成健身器械知识库到 AI 提示中
- 智能分析和推荐

#### 4. 健身控制器 (FitnessController.java)

提供 RESTful API：

- `POST /api/fitness/chat` - 与健身 AI 助手对话
- `GET /api/fitness/equipment` - 获取所有器械列表
- `GET /api/fitness/equipment/{name}` - 获取特定器械信息
- `GET /api/fitness/equipment/search?keyword=xxx` - 搜索器械
- `GET /api/fitness/equipment/muscle/{muscle}` - 按肌群查找器械

### 前端实现

#### 1. 健身聊天界面 (FitnessChatInterface.jsx)

- 专用的健身主题 UI 设计
- 快速输入按钮，方便常见问题
- 实时对话交互
- Markdown 渲染支持

#### 2. 路由配置

- 添加 `/fitness` 路由
- 在主导航栏添加"健身助手"入口

## 内置器械知识库

### 胸部训练

- 杠铃卧推
- 哑铃卧推
- 器械推胸

### 背部训练

- 引体向上器械
- 杠铃划船
- 坐姿划船器械

### 腿部训练

- 杠铃深蹲
- 腿举器械
- 器械深蹲

### 肩部训练

- 杠铃肩推
- 哑铃侧平举

### 手臂训练

- 杠铃弯举
- 双杠臂屈伸

### 有氧器械

- 跑步机
- 椭圆机
- 划船机

## 使用示例

### 示例对话 1：器械被占用

```
用户: 卧推架被占用了，有什么替代方案？

AI助手: 当卧推架被占用时，您可以考虑以下替代方案：

1. **哑铃卧推** - 这是最接近杠铃卧推的替代方案，能够锻炼相同的肌群（胸大肌、三角肌前束、肱三头肌）。相比杠铃卧推，哑铃卧推能给肌肉提供更大的活动范围，有助于平衡左右力量。

2. **器械推胸** - 固定器械推胸适合初学者，提供稳定的运动轨迹，安全性高。主要锻炼胸大肌、三角肌前束和肱三头肌。

3. **俯卧撑** - 无需器械，随时随地可以训练。可以调整角度和姿势来针对不同部位（标准俯卧撑、上斜俯卧撑、下斜俯卧撑）。

**建议**: 如果您想完全模拟杠铃卧推的效果，优先选择哑铃卧推。如果健身房有史密斯机，也可以考虑史密斯机卧推。
```

### 示例对话 2：训练需求

```
用户: 我想练肩部，有什么器械推荐？

AI助手: 针对肩部训练，我推荐以下器械：

1. **杠铃肩推** - 肩部训练的核心动作，主要锻炼三角肌前束和中束。需要中等偏高级水平。

2. **哑铃侧平举** - 孤立训练三角肌中束的最佳动作，适合所有水平。保持微弯肘部，慢慢举起。

还可以考虑：
- 史密斯机肩推
- 器械肩推
- 阿诺德推举

**训练建议**: 建议先做复合动作（杠铃肩推），再做孤立动作（哑铃侧平举）。
```

## 如何添加新器械

如果您想添加新的健身器械到知识库，只需在 `GymEquipmentService.java` 的 `createInitialEquipmentData()` 方法中添加：

```java
saveEquipment("器械名称",
    "器械描述和功能说明",
    "主要锻炼肌群（如：胸大肌、三角肌前束）",
    "替代器械列表（逗号分隔）",
    "训练类型（如：力量训练、增肌训练）",
    "难度等级（初级/中级/高级）",
    "注意事项和安全提示");
```

## 部署说明

### 1. 数据库初始化

应用启动时，`GymEquipmentService` 会自动检测数据库是否为空，如果为空则自动初始化器械数据。

### 2. 配置要求

确保 `application.properties` 中配置了正确的 AI 模型：

```properties
ai.model.base-url=http://localhost:11434/api
ai.model.name=llama3.2
```

### 3. 启动步骤

1. 启动 PostgreSQL 数据库
2. 启动后端服务: `cd ai-agent-backend && ./gradlew bootRun`
3. 启动前端服务: `cd ai-agent-frontend && npm run dev`
4. 访问 http://localhost:5173/fitness

## API 文档

启动后端后，访问以下地址查看完整 API 文档：

- Swagger UI: http://localhost:8080/swagger-ui.html
- API JSON: http://localhost:8080/api-docs

## 注意事项

1. 首次启动时，系统会自动初始化健身器械数据库
2. AI 响应质量取决于配置的 AI 模型性能
3. 建议使用 llama3.2 或更高版本的 AI 模型
4. 器械难度等级仅供参考，请根据个人实际情况调整

## 未来扩展

- [ ] 添加更多器械类型和训练动作
- [ ] 支持用户自定义训练计划
- [ ] 添加器械占用情况实时更新
- [ ] 集成用户训练历史分析
- [ ] 支持多语言界面

## 技术支持

如有问题或建议，请查看项目主 README 文件或提交 Issue。
